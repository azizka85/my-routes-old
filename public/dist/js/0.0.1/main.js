import{H as t,M as e,a as r,b as i,P as n}from"./globals-1ab50b00.js";import{D as s}from"./default-layout-55d6b7fe.js";import"./base-layout-d2a90afd.js";var o=class{routes=[];root="/";before;page404;constructor(t){t?.root&&(this.root="/"===t.root?"/":"/"+this.trimSlashes(t.root)+"/"),"function"==typeof t?.before&&(this.before=t.before),"function"==typeof t?.page404&&(this.page404=t.page404),t?.routes?.length>0&&t.routes.forEach((t=>{this.add(t.rule,t.handler,t.options)}))}get fragment(){let t=decodeURI(location.pathname);return"/"!==this.root&&(t=t.replace(this.root,"")),this.trimSlashes(t)}get query(){return this.parseQuery(location.search)}add(t,e,r){return this.routes.push({rule:this.parseRouteRule(t),handler:e,options:r}),this}remove(t){return"string"==typeof t&&(t=this.parseRouteRule(t)),this.routes.some(((e,r)=>(e.handler===t||e.rule===t)&&(this.routes.splice(r,1),!0))),this}redirectTo(t,e){return t=this.trimSlashes(t),history.replaceState(e,null,this.root+t),this.processUri(),this}navigateTo(t,e){return t=this.trimSlashes(t),history.pushState(e,null,this.root+t),this.processUri(),this}refresh(){return this.redirectTo(this.fragment+location.search,history.state)}trimSlashes(t){return"string"!=typeof t?"":t.replace(/\/$/,"").replace(/^\//,"")}parseRouteRule(t){if("string"!=typeof t)return t;let e=this.trimSlashes(t).replace(/([\\\/\-\_\.])/g,"\\$1").replace(/\{[a-zA-Z]+\}/g,"(:any)").replace(/\:any/g,"[\\w\\-\\_\\.]+").replace(/\:word/g,"[a-zA-Z]+").replace(/\:num/g,"\\d+");return new RegExp("^"+e+"$","i")}parseQuery(t){let e={};return"string"!=typeof t||("?"===t[0]&&(t=t.substr(1)),t.split("&").forEach((t=>{let r=t.split("=");""!==r[0]&&(void 0===r[1]&&(r[1]=!0),e[decodeURIComponent(r[0])]=r[1])}))),e}findRoute(){let t=this.fragment;return this.routes.some((e=>{let r=t.match(e.rule);if(r){r.shift();let i=this.query,n={fragment:t,query:i,match:r,options:e.options},s=this.before?.(n);return!s&&(e.handler?.(n),!0)}return!1}))}processUri(){let t=this.fragment;this.findRoute()||this.page404?.(t)}addUriListener(){window.onpopstate=this.processUri.bind(this)}removeUriListener(){window.onpopstate=null}};const a={},l={};window.pages=a,window.layouts=l;let p=!0;const u=new o({root:n,routes:[{rule:"",handler(r){!async function(r,i){window.page=r;let n=null;if(!(t in a)){const e=await import("./home-page-59a3d537.js");a[t]=e.HomePage.instance,n=await a[t].init(n,i)}if(!(e in l)){const t=await import("./main-layout-ff69239a.js");l[e]=t.MainLayout.instance,n=await l[e].init(n,i)}s.instance.content!==l[e]&&s.instance.replaceContent(l[e]),l[e].content!==a[t]&&l[e].replaceContent(a[t])}(r,p)},options:{}},{rule:"/signin",handler(t){!async function(t,e){window.page=t;let i=null;if(!(r in a)){const t=await import("./signin-page-d6a8fdb0.js");a[r]=t.SignInPage.instance,i=await a[r].init(i,e)}s.instance.content!==a[r]&&s.instance.replaceContent(a[r])}(t,p)},options:{}},{rule:"/signup",handler(t){!async function(t,e){window.page=t;let r=null;if(!(i in a)){const t=await import("./signup-page-055dd5d7.js");a[i]=t.SignUpPage.instance,r=await a[i].init(r,e)}s.instance.content!==a[i]&&s.instance.replaceContent(a[i])}(t,p)},options:{}}]});window.router=u,u.addUriListener(),u.processUri(),p=!1;
