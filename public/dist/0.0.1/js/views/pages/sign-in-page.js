import{a as f,b as g}from"../../chunk-B3VKDLX4.js";import{d as m}from"../../chunk-VTHP63GR.js";import{k as r}from"../../chunk-SG6BWAK5.js";import{a as u,b as h,c as E,d as w}from"../../chunk-CVCDAUDG.js";import{c as p}from"../../chunk-WSRL3A7G.js";var i=class{node=null;titleElem=null;emailHelperElem=null;passwordInputElem=null;passwordLabelElem=null;passwordHelperElem=null;signUpBtn=null;signUpBtnLabel=null;signInBtnLabel=null;cancelBtn=null;cancelBtnLabel=null;authService=null;signUpBtnClickHandler;cancelBtnClickHandler;formSubmitHandler;static get instance(){return i.page||(i.page=new i),i.page}constructor(){this.signUpBtnClickHandler=e=>u(e,this.signUpBtn?.root),this.cancelBtnClickHandler=e=>u(e,this.cancelBtn?.root),this.formSubmitHandler=e=>{e.preventDefault();let n=this.node?.querySelector(".main-card form"),l=new FormData(n);console.log("Form submited: ");for(let o of l.entries())console.log(o[0]+":",o[1])}}get elem(){return this.node}async init(e,n){let l=await h(e,n,[]);if(this.node=l.querySelector('[data-page="signin-page"]')||null,this.node){let o=this.node.querySelectorAll(".main-card__text-field");for(let d of o)d.classList.remove("mdc-text-field--no-label"),new f(d);let t=this.node.querySelector(".main-card form");this.titleElem=this.node.querySelector('[data-title="main"]')||null,this.emailHelperElem=t?.querySelector("#email-helper")||null,this.passwordInputElem=t?.querySelector('[name="password"]')||null,this.passwordLabelElem=t?.querySelector("#password-label")||null,this.passwordHelperElem=t?.querySelector("#password-helper")||null;let s=t?.querySelector('[data-button="sign-up"]')||null;s&&(this.signUpBtn=new r(s),this.signUpBtnLabel=s.querySelector(".mdc-button__label"));let a=t?.querySelector('[data-button="sign-in"]')||null;a&&(new r(a),this.signInBtnLabel=a.querySelector(".mdc-button__label"));let c=t?.querySelector('[data-button="cancel"]')||null;c&&(this.cancelBtn=new r(c),this.cancelBtnLabel=c.querySelector(".mdc-button__label"))}return this.authService=new g,await this.authService.init(this,n),l}async mount(){this.node?.querySelector(".main-card form")?.addEventListener("submit",this.formSubmitHandler),this.signUpBtn?.listen("click",this.signUpBtnClickHandler),this.cancelBtn?.listen("click",this.cancelBtnClickHandler),await Promise.all([this.authService?.mount(),E(this.node)])}async unmount(){this.node?.querySelector(".main-card form")?.removeEventListener("submit",this.formSubmitHandler),this.signUpBtn?.unlisten("click",this.signUpBtnClickHandler),this.cancelBtn?.unlisten("click",this.cancelBtnClickHandler),await Promise.all([w(this.node),this.authService?.unmount()])}async load(e,n,l){this.titleElem&&(this.titleElem.textContent=window.tr("Sign In")),this.emailHelperElem&&(this.emailHelperElem.textContent=window.tr("Email required")),this.passwordInputElem&&(this.passwordInputElem.placeholder=window.tr("Password")),this.passwordLabelElem&&(this.passwordLabelElem.textContent=window.tr("Password")),this.passwordHelperElem&&(this.passwordHelperElem.textContent=window.tr("Password required")),this.signUpBtnLabel&&(this.signUpBtnLabel.textContent=window.tr("Sign Up")),this.signInBtnLabel&&(this.signInBtnLabel.textContent=window.tr("Sign In")),this.cancelBtnLabel&&(this.cancelBtnLabel.textContent=window.tr("Cancel")),this.signUpBtn?.root?.setAttribute("href",(e===m?"":`/${e}`)+"/sign-up"),this.cancelBtn?.root?.setAttribute("href",(e===m?"":`/${e}`)+"/"),await this.authService?.load?.(e,n,l)}},b=i;p(b,"page",null);export{b as SignInPage};
