import{a as h,c as w,e as u}from"./chunk-PM37KJF3.js";import{a as R,b as U,c as p}from"./chunk-2W6XHV3X.js";var y=R(g=>{var d=class{routes=[];root="/";before;page404;constructor(t){t?.root&&(this.root=t.root==="/"?"/":"/"+this.trimSlashes(t.root)+"/"),typeof t?.before=="function"&&(this.before=t.before),typeof t?.page404=="function"&&(this.page404=t.page404),t?.routes?.length>0&&t.routes.forEach(e=>{this.add(e.rule,e.handler,e.options)})}get fragment(){let t=decodeURI(location.pathname);return this.root!=="/"&&(t=t.replace(this.root,"")),this.trimSlashes(t)}get query(){return this.parseQuery(location.search)}add(t,e,r){return this.routes.push({rule:this.parseRouteRule(t),handler:e,options:r}),this}remove(t){return typeof t=="string"&&(t=this.parseRouteRule(t)),this.routes.some((e,r)=>e.handler===t||e.rule===t?(this.routes.splice(r,1),!0):!1),this}async redirectTo(t,e){let r=this.transformURL(t);return history.replaceState(e,null,this.root+r),await this.processUri(),this}async navigateTo(t,e){let r=this.transformURL(t);return history.pushState(e,null,this.root+r),await this.processUri(),this}refresh(){return this.redirectTo(this.fragment+location.search,history.state)}transformURL(t){if(typeof t!="string")return"";let r=t.trim().split("?"),o="",s="";return r.length===1?o=r[0]:(o=r[0].trim(),s=r[1].trim()),o?(this.root!=="/"&&(o=o.replace(this.root,"")),o=this.trimSlashes(o)):o=this.fragment,s?`${o}?${s}`:o}trimSlashes(t){return typeof t!="string"?"":t.replace(/\/$/,"").replace(/^\//,"")}parseRouteRule(t){if(typeof t!="string")return t;let r=this.trimSlashes(t).replace(/([\\\/\-\_\.])/g,"\\$1").replace(/\{[a-zA-Z]+\}/g,"(:any)").replace(/\:any/g,"[\\w\\-\\_\\.]+").replace(/\:word/g,"[a-zA-Z]+").replace(/\:num/g,"\\d+");return new RegExp("^"+r+"$","i")}parseQuery(t){let e={};return typeof t!="string"||(t[0]==="?"&&(t=t.substr(1)),t.split("&").forEach(r=>{let o=r.split("=");o[0]!==""&&(o[1]===void 0&&(o[1]=!0),e[decodeURIComponent(o[0])]=o[1])})),e}async findRoute(){let t=this.fragment,e=this.query,r=!1;if(!this.before?.({fragment:t,query:e}))for(let s of this.routes){let l=t.match(s.rule);if(l){l.shift();let a={fragment:t,query:e,match:l,options:s.options};await s.handler?.(a),r=!0;break}}return r}async processUri(){let t=this.fragment;await this.findRoute()||this.page404?.(t)}addUriListener(){window.onpopstate=this.processUri.bind(this)}removeUriListener(){window.onpopstate=null}};g.Router=d});var m=U(y());var n=class extends w{static get instance(){return n.layout||(n.layout=new n),n.layout}},f=n;p(f,"layout",null);async function b(i,t,e){let r={};for(let o of i)if(!(o in window.layouts)){let s=await import(`./views/layouts/${o}.js?time=${Date.now()}`);t=await s[u(o)]?.instance?.init?.(t,e),window.layouts[o]=s[u(o)]?.instance,r[o]=!0}return r}async function v(i,t,e){let r=[...t].reverse(),o=f.instance;for(let s of r)o.content!==window.layouts[s]&&await o.replaceContent(window.layouts[s]),await window.layouts[s].load?.(i,e[s]??!1),o=window.layouts[s]}async function c(i,t,e,r){window.page=i;let o=null,s=!1;if(!(t in window.pages)){let a=await import(`./views/pages/${t}.js?time=${Date.now()}`);o=await a[u(t)]?.instance?.init?.(o,r),window.pages[t]=a[u(t)]?.instance,s=!0}let l=await b(e,o,r);if(window.page.fragment===i.fragment){await v(i,e,l);let a=e.length>0?window.layouts[e[0]]:f.instance;a&&a.content!==window.pages[t]&&await a.replaceContent(window.pages[t]),await window.pages[t].load?.(i,s)}}function L(){document.querySelector(".splash")?.classList.remove("splash--open")}window.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{let i=!0,t=new m.Router({root:h,routes:[{rule:"",async handler(e){await c(e,"home-page",["main-layout"],i)},options:{}},{rule:"/sign-in",async handler(e){await c(e,"sign-in-page",[],i)},options:{}},{rule:"/sign-up",async handler(e){await c(e,"sign-up-page",[],i)},options:{}}]});window.pages={},window.layouts={},window.router=t,t.addUriListener(),t.processUri().then(()=>L(),e=>{console.error(e),L()}),i=!1},500)});
